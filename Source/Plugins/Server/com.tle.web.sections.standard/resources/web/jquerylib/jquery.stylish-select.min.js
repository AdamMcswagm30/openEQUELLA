(function(a){a("html").addClass("stylish-select");if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d){if(this===void 0||this===null){throw new TypeError()}var e=Object(this);var b=e.length>>>0;if(b===0){return -1}var f=0;if(arguments.length>0){f=Number(arguments[1]);if(f!==f){f=0}else{if(f!==0&&f!==(1/0)&&f!==-(1/0)){f=(f>0||-1)*Math.floor(Math.abs(f))}}}if(f>=b){return -1}var c=f>=0?f:Math.max(b-Math.abs(f),0);for(;c<b;c++){if(c in e&&e[c]===d){return c}}return -1}}a.fn.extend({getSSValue:function(){return a(this).find(":selected").val()},setSSValue:function(b){a(this).val(b).change();return this},resetSS:function(){var c=a(this);var b=c.next();if(b.hasClass("newListSelected")){b.remove();c.unbind(".sSelect")}c.sSelect(c.data("ssOpts"))}});a.fn.sSelect=function(b){return this.each(function(){var i=14;var u=0;var j={defaultText:"Please select",animationSpeed:0,ddMaxHeight:"",containerClass:"",alwaysDisplayUp:false};var n=a.extend(j,b),e=a(this),k=a('<div class="selectedTxt"></div>'),v=a('<div class="focus newListSelected '+n.containerClass+'"></div>'),D=a('<ul class="newList" style="visibility:hidden; display:none"></ul>'),x=-1,d=-1,o=[],B=false,z=false,C;a(this).data("ssOpts",b);v.insertAfter(e);v.attr("tabindex",e.attr("tabindex")||"0");k.prependTo(v);D.appendTo(v);var r;if(a.browser.webkit){r=e.outerWidth()}else{r=e.css("width")}if(r==="auto"||r==="0px"){r=e.width()+u}else{r=parseInt(r)+u}v.css("width",r);e.hide();k.data("ssReRender",!k.is(":visible"));if(e.children("optgroup").length==0){e.children().each(function(F){var H=a(this).html();var E=a(this).val();var G=a(this).attr("disabled");o.push(H.charAt(0).toLowerCase());if(a(this).attr("selected")){n.defaultText=H;d=F}var I="";if(G){I=' class="disabled-entry"'}D.append(a("<li"+I+"><a"+I+' href="JavaScript:void(0);">'+H+"</a></li>").data("key",E))});C=D.find("li a")}else{e.children("optgroup").each(function(){var E=a(this).attr("label"),G=a('<li class="newListOptionTitle">'+E+"</li>");G.appendTo(D);var F=a("<ul></ul>");F.appendTo(G);a(this).children().each(function(){++x;var J=a(this).html();var H=a(this).val();var I=a(this).attr("disabled");o.push(J.charAt(0).toLowerCase());if(a(this).attr("selected")){n.defaultText=J;d=x}var K="";if(I){K=' class="disabled-entry"'}F.append(a("<li"+K+"><a"+K+' href="JavaScript:void(0);">'+J+"</a></li>").data("key",H))})});C=D.find("ul li a")}D.css("width",r+i);var q=D.height()+1,p=v.height(),A=C.length;if(d!=-1){h(d,true)}else{k.text(n.defaultText)}function s(){var F=parseInt(v.css("top")),E=jQuery(window).height(),G=jQuery(window).scrollTop();if(q>parseInt(n.ddMaxHeight)){q=parseInt(n.ddMaxHeight)}F=F-G;if(n.alwaysDisplayUp||F+q>=E){D.css({top:"-"+(q+1)+"px",height:q}).addClass("onTop").removeClass("onBottom");e.onTop=true}else{D.css({height:q}).addClass("onBottom").removeClass("onTop");e.onTop=false}}s();function w(){v.css("position","relative")}function c(){v.css("position","static")}function m(){return e.attr("disabled")}k.bind("click.sSelect",function(F){F.stopPropagation();if(m()){return}if(a(this).data("ssReRender")){q=D.height("").height();p=v.height();a(this).data("ssReRender",false);s()}a(".newList").not(a(this).next()).hide().parent().css("position","static").removeClass("newListSelFocus");D.toggle();if(D.is(":visible")){v.addClass("showUp")}else{v.removeClass("showUp")}w();try{C.eq(d).focus()}catch(E){}});C.bind("click.sSelect",function(F){var E=a(F.target);if(!E.hasClass("disabled-entry")){d=C.index(E);z=true;h(d);D.hide();v.removeClass("showUp");v.css("position","static");F.preventDefault()}return false});C.bind("mouseenter.sSelect",function(F){var E=a(F.target);if(!E.hasClass("disabled-entry")){E.addClass("newListHover")}}).bind("mouseleave.sSelect",function(F){var E=a(F.target);if(!E.hasClass("disabled-entry")){E.removeClass("newListHover")}});function h(E,I){C.removeClass("hiLite").eq(E).addClass("hiLite");if(D.is(":visible")){try{C.eq(E).focus()}catch(F){}}var H=C.eq(E).text();var G=C.eq(E).parent().data("key");if(I==true){e.val(G);k.text(H);return false}try{e.val(G)}catch(F){e[0].selectedIndex=E}e.change();k.text(H);a("div.newListSelected:focus").attr("title",H)}e.bind("change.sSelect",function(E){$targetInput=a(E.target);if(z==true){z=false;return false}$currentOpt=$targetInput.find(":selected");d=$targetInput.find("option").index($currentOpt);h(d,true)});function t(E){if(m()){return false}a(E).unbind("keydown.sSelect").bind("keydown.sSelect",function(H){if(m()){return false}var G=H.which;z=true;switch(G){case 40:case 39:y();return false;break;case 38:case 37:l();return false;break;case 33:case 36:g();return false;break;case 34:case 35:f();return false;break;case 13:case 27:D.hide();c();return false;break}keyPressed=String.fromCharCode(G).toLowerCase();var F=o.indexOf(keyPressed);if(typeof F!="undefined"){++d;d=o.indexOf(keyPressed,d);if(d==-1||d==null||B!=keyPressed){d=o.indexOf(keyPressed)}h(d);B=keyPressed;return false}})}function y(){if(d<(A-1)){++d;h(d)}}function l(){if(d>0){--d;h(d)}}function g(){d=0;h(d)}function f(){d=A-1;h(d)}v.bind("click.sSelect",function(E){E.stopPropagation();t(this)});v.bind("focus.sSelect",function(){a(this).addClass("newListSelFocus");t(this)});v.bind("blur.sSelect",function(){a(this).removeClass("newListSelFocus")});a(document).bind("click.sSelect",function(){v.removeClass("newListSelFocus");D.hide();v.removeClass("showUp");c()});k.bind("mouseenter.sSelect",function(F){var E=a(F.target);E.parent().addClass("newListSelHover")}).bind("mouseleave.sSelect",function(F){var E=a(F.target);E.parent().removeClass("newListSelHover")});D.css({left:"0",display:"none",visibility:"visible"})})}})(jQuery);